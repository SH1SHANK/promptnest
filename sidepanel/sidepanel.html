<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Promptium Side Panel</title>
    <link rel="icon" type="image/png" sizes="32x32" href="../icons/promptium/icon32.png" />
    <link rel="stylesheet" href="../popup/popup.css" />
    <link rel="stylesheet" href="../popup/onboarding.css" />
    <link rel="stylesheet" href="tailwind.css" />
  </head>
  <body class="pn-popup pn-sidepanel">
    <header class="pn-header pn-sidepanel-header">
      <div class="pn-header-actions">
        <button
          id="back-btn"
          class="pn-btn pn-btn--ghost pn-icon-btn hidden pn-mr-auto"
          type="button"
          title="Back to Prompts"
          aria-label="Back to Prompts"
        >
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
        </button>
        <button
          id="history-btn"
          class="pn-btn pn-btn--ghost pn-icon-btn"
          type="button"
          title="Chat History"
          aria-label="Chat History"
        >
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
        </button>
        <button
          id="settings-btn"
          class="pn-btn pn-btn--ghost pn-icon-btn"
          type="button"
          title="Settings"
          aria-label="Settings"
        >
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
          </svg>
        </button>
        <button
          id="refresh-btn"
          class="pn-btn pn-btn--ghost pn-icon-btn"
          type="button"
          title="Refresh Workspace"
          aria-label="Refresh Workspace"
        >
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="23 4 23 10 17 10"></polyline>
            <polyline points="1 20 1 14 7 14"></polyline>
            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
          </svg>
        </button>
        <button
          id="add-prompt-btn"
          class="pn-btn pn-btn--primary"
          type="button"
        >
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Add Prompt
        </button>
      </div>
    </header>

    <div id="search-wrap" class="pn-search-row">
      <div class="pn-search-input-wrap">
        <input
          id="prompt-search"
          class="pn-search"
          type="text"
          placeholder="Search prompts by title, text, or tags"
        />
        <button id="pn-search-clear" type="button" class="pn-search-clear pn-hidden" aria-label="Clear search">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <span id="pn-search-spark" class="pn-search-spark pn-hidden">‚ú¶</span>
      <div id="pn-ai-bar" class="pn-ai-bar pn-ai-bar--hidden">
        <div class="pn-ai-bar__line"></div>
      </div>
    </div>

    <nav class="pn-tab-bar" aria-label="Promptium tabs">
      <button class="tab pn-tab active" data-tab="prompts" type="button">
        Prompts
      </button>
      <button class="tab pn-tab" data-tab="tags" type="button">Tags</button>
    </nav>

    <main class="pn-main pn-sidepanel-main">
      <section class="tab-content pn-tab-content active" data-tab="prompts">
        <div id="pn-smart-strip" class="pn-smart-strip pn-hidden">
          <span class="pn-smart-strip__label">‚ú¶ Matches your current topic</span>
          <div id="pn-smart-chips" class="pn-smart-chips"></div>
          <button class="pn-smart-strip__close" id="pn-smart-close" type="button">√ó</button>
        </div>
        <div id="prompt-list" class="pn-list"></div>
      </section>

      <section class="tab-content pn-tab-content" data-tab="history">
        <div id="history-list" class="pn-list"></div>
      </section>

      <section class="tab-content pn-tab-content" data-tab="export">
        <div class="pn-export-grid">
          <aside class="pn-export-controls">
            <div class="pn-export-meta-badges">
              <span id="selection-meta" class="pn-card-meta">No messages selected</span>
              <div id="export-counts" class="pn-export-counts pn-hidden">
                <span id="export-msg-count" class="pn-export-count-badge">0 msgs</span>
                <span id="export-word-count" class="pn-export-count-badge">0 words</span>
              </div>
            </div>

            <label class="pn-field">
              <span>Export Format</span>
              <select id="export-format">
                <option value="markdown">Markdown (.md)</option>
                <option value="txt">Plain Text (.txt)</option>
                <option value="json">JSON (.json)</option>
                <option value="pdf">PDF (.pdf)</option>
              </select>
            </label>

            <label class="pn-field">
              <span>Content Mode</span>
              <select id="export-content-mode">
                <option value="structured">Structured messages</option>
                <option value="combined">Combined text</option>
              </select>
            </label>

            <label class="pn-field">
              <span>Font Family</span>
              <select id="export-font-style">
                <option value="System">System</option>
                <option value="Outfit">Outfit</option>
                <option value="Montserrat">Montserrat</option>
                <option value="Montstret">Montstret</option>
                <option value="Inter">Inter</option>
                <option value="Helvetica">Helvetica</option>
                <option value="Helivica">Helivica</option>
                <option value="Poppins">Poppins</option>
                <option value="Roboto">Roboto</option>
                <option value="Open Sans">Open Sans</option>
                <option value="Lato">Lato</option>
                <option value="Nunito">Nunito</option>
                <option value="Source Sans 3">Source Sans 3</option>
                <option value="Merriweather">Merriweather</option>
                <option value="JetBrains Mono">JetBrains Mono</option>
                <option value="Georgia">Georgia</option>
              </select>
            </label>

            <label class="pn-field">
              <span>Font Size</span>
              <div class="pn-export-font-row">
                <input id="export-font-size" type="range" min="12" max="20" step="1" value="14" />
                <input id="export-font-size-number" type="number" min="12" max="20" step="1" value="14" />
              </div>
            </label>

            <label class="pn-field">
              <span>Background</span>
              <select id="export-bg-style">
                <option value="dark">Dark</option>
                <option value="light">Light</option>
                <option value="sepia">Sepia</option>
                <option value="custom">Custom</option>
              </select>
            </label>

            <label id="export-bg-custom-wrap" class="pn-field pn-hidden">
              <span>Custom Background</span>
              <input id="export-bg-custom" type="color" value="#18181c" />
            </label>

            <label class="pn-field">
              <span>Filename <small class="pn-field-hint">(optional)</small></span>
              <input id="export-filename" type="text" placeholder="Auto-generated" class="pn-export-filename-input" />
            </label>

            <div class="pn-export-toggles">
              <label class="pn-check-row">
                <input id="include-date" type="checkbox" checked />
                <span>Include export date</span>
              </label>

              <label class="pn-check-row">
                <input id="include-platform" type="checkbox" checked />
                <span>Include platform label</span>
              </label>

              <label class="pn-check-row">
                <input id="include-msg-numbers" type="checkbox" />
                <span>Include message numbers</span>
              </label>
            </div>

            <div class="pn-export-actions-row">
              <button id="export-btn" type="button" class="pn-btn pn-btn--primary">Export Markdown</button>
              <button id="copy-export-btn" type="button" class="pn-btn pn-btn--ghost pn-btn--copy" title="Copy to clipboard">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
                Copy
              </button>
            </div>
            <div id="export-status" class="pn-card-meta"></div>
          </aside>

          <section class="pn-export-preview-shell">
            <div class="pn-export-preview-head">
              <div>
                <h3 class="pn-section-title">Preview</h3>
                <p id="preview-label" class="pn-card-meta">Markdown preview</p>
              </div>
              <button id="export-reload-selection" type="button" class="pn-btn pn-btn--ghost pn-hidden">
                Reload latest selection
              </button>
            </div>
            <div id="preview" class="pn-export-preview-body"></div>
          </section>
        </div>
      </section>

      <section class="tab-content pn-tab-content" data-tab="tags">
        <div class="pn-tags-view">
          <div class="pn-tags-view-header pn-tags-view-header--spaced">
            <h3 class="pn-section-title">Quick Filters</h3>
            <p class="pn-card-meta">Click a tag to view matching prompts</p>
          </div>
          <div id="pn-tag-filter-bar" class="pn-tag-filter-bar">
            <!-- Chips injected here -->
          </div>

          <hr class="pn-sv-divider pn-sv-divider--spaced" />

          <div class="pn-tags-view-header pn-tags-view-header--spaced">
            <h3 class="pn-section-title">Manage Tags</h3>
          </div>
          <div id="tag-list" class="pn-tag-list">
            <div id="pn-tags-empty" class="pn-empty-state">
              <div class="pn-empty-icon">üè∑Ô∏è</div>
              <p>No tags yet.</p>
              <span>Tags you add to prompts will appear here.</span>
            </div>
          </div>
        </div>
      </section>

      <section class="tab-content pn-tab-content" data-tab="settings">
        <div class="pn-sv">
          <!-- Hero -->
          <div class="pn-sv-hero">
            <h3 class="pn-sv-hero__title">Settings</h3>
            <p class="pn-sv-hero__sub">Tune intelligence, exports, and personalization.</p>
          </div>

          <!-- ‚îÄ‚îÄ Intelligence ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
          <div class="pn-sv-section">
            <h4 class="pn-sv-heading">Intelligence</h4>

            <div class="pn-sv-row">
              <div class="pn-sv-row__copy">
                <span class="pn-sv-row__label">Smart features</span>
                <span class="pn-sv-row__desc">Semantic ranking, tag suggestions, and duplicate checks.</span>
              </div>
              <label class="pn-toggle">
                <input id="setting-enable-ai" type="checkbox" checked />
                <span class="pn-toggle__track"><span class="pn-toggle__knob"></span></span>
              </label>
            </div>

            <div class="pn-sv-row">
              <div class="pn-sv-row__copy">
                <span class="pn-sv-row__label">Semantic search</span>
                <span class="pn-sv-row__desc">Rank results by meaning, not just keywords.</span>
              </div>
              <label class="pn-toggle">
                <input id="setting-semantic-search" type="checkbox" checked />
                <span class="pn-toggle__track"><span class="pn-toggle__knob"></span></span>
              </label>
            </div>

            <div class="pn-sv-model-pill" id="pn-model-pill">
              <span class="pn-sv-model-pill__dot"></span>
              <span id="ai-progress-text">Initializing‚Ä¶</span>
            </div>
            <button id="pn-ai-retry-btn" class="pn-btn pn-btn--ghost pn-hidden" type="button">Retry Embedding Setup</button>
          </div>

          <hr class="pn-sv-divider" />

          <!-- ‚îÄ‚îÄ Prompt Quality ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
          <div class="pn-sv-section">
            <h4 class="pn-sv-heading">Prompt Quality</h4>

            <div class="pn-sv-row">
              <div class="pn-sv-row__copy">
                <span class="pn-sv-row__label">Auto-tag suggestions</span>
                <span class="pn-sv-row__desc">Suggest tags based on prompt content.</span>
              </div>
              <label class="pn-toggle">
                <input id="setting-auto-suggest" type="checkbox" checked />
                <span class="pn-toggle__track"><span class="pn-toggle__knob"></span></span>
              </label>
            </div>

            <div class="pn-sv-row">
              <div class="pn-sv-row__copy">
                <span class="pn-sv-row__label">Duplicate detection</span>
                <span class="pn-sv-row__desc">Warn when saving near-identical prompts.</span>
              </div>
              <label class="pn-toggle">
                <input id="setting-duplicate-check" type="checkbox" checked />
                <span class="pn-toggle__track"><span class="pn-toggle__knob"></span></span>
              </label>
            </div>
          </div>

          <hr class="pn-sv-divider" />

          <!-- ‚îÄ‚îÄ Export ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
          <div class="pn-sv-section">
            <h4 class="pn-sv-heading">Export</h4>

            <label class="pn-sv-field">
              <span class="pn-sv-field__label">Default format</span>
              <select id="setting-export-format" class="pn-sv-select">
                <option value="markdown">Markdown (.md)</option>
                <option value="pdf">PDF (.pdf)</option>
              </select>
            </label>

            <div class="pn-sv-row pn-sv-row--compact">
              <span class="pn-sv-row__label">Include date</span>
              <label class="pn-toggle pn-toggle--sm">
                <input id="setting-export-date" type="checkbox" checked />
                <span class="pn-toggle__track"><span class="pn-toggle__knob"></span></span>
              </label>
            </div>

            <div class="pn-sv-row pn-sv-row--compact">
              <span class="pn-sv-row__label">Include platform</span>
              <label class="pn-toggle pn-toggle--sm">
                <input id="setting-export-platform" type="checkbox" checked />
                <span class="pn-toggle__track"><span class="pn-toggle__knob"></span></span>
              </label>
            </div>
          </div>

          <hr class="pn-sv-divider" />

          <!-- ‚îÄ‚îÄ Connections ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
          <div class="pn-sv-section">
            <h4 class="pn-sv-heading">Connections</h4>

            <div class="pn-sv-api-row">
              <div class="pn-sv-api-row__icon">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
              </div>
              <input
                id="setting-gemini-key"
                type="password"
                class="pn-sv-api-row__input"
                placeholder="Gemini API key"
                autocomplete="off"
              />
              <button type="button" id="check-api-key" class="pn-sv-api-row__check" title="Test connection">Check</button>
              <button type="button" id="toggle-key-vis" class="pn-sv-api-row__eye" title="Show/hide key">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
              </button>
            </div>
            <p class="pn-sv-api-hint">
              Powers contextual suggestions.
              <a href="https://aistudio.google.com/app/apikey" target="_blank" class="pn-sv-api-link">Get a free key ‚Üí</a>
            </p>
          </div>

          <hr class="pn-sv-divider" />

          <!-- ‚îÄ‚îÄ Personalization ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
          <div class="pn-sv-section">
            <h4 class="pn-sv-heading">Personalization</h4>

            <label class="pn-sv-field">
              <span class="pn-sv-field__label">Your context</span>
              <textarea
                id="setting-user-context"
                class="pn-sv-textarea"
                rows="3"
                placeholder="e.g. I build TypeScript browser extensions and write technical docs."
              ></textarea>
            </label>
            <p class="pn-sv-api-hint">Helps smart features understand your workflow.</p>
          </div>

          <!-- ‚îÄ‚îÄ Actions ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
          <div class="pn-sv-actions">
            <button id="reset-settings-btn" class="pn-btn pn-btn--ghost" type="button">Reset</button>
            <div class="pn-sv-actions__right">
              <p id="settings-status" class="pn-sv-status"></p>
              <button id="save-settings-btn" class="pn-btn pn-btn--primary" type="button" disabled>Save</button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <div
      id="add-modal"
      class="pn-modal pn-hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="pn-add-modal-title"
      aria-describedby="pn-add-modal-desc"
    >
      <div class="pn-modal__backdrop" data-close-modal></div>
      <div class="pn-modal__panel pn-add-modal__panel">
        <h2 id="pn-add-modal-title" class="pn-modal__title">Add Prompt</h2>
        <p id="pn-add-modal-desc" class="pn-card-meta pn-add-modal__desc">
          Save a reusable prompt with optional AI polish and tag suggestions.
        </p>

        <div class="pn-add-modal__section">
          <label class="pn-field">
            <span>Title</span>
            <input id="prompt-title" type="text" placeholder="Prompt title" />
          </label>
        </div>

        <div class="pn-add-modal__section">
          <label class="pn-field">
            <span>Prompt Text</span>
            <textarea
              id="prompt-text"
              rows="6"
              placeholder="Write your prompt here..."
            ></textarea>
          </label>
        </div>

        <div class="pn-add-modal__section">
          <label class="pn-field">
            <span>Tags</span>
            <div class="pn-tag-badges" id="tag-badges-wrap">
              <input
                id="prompt-tags-input"
                class="pn-tag-badges__input"
                type="text"
                placeholder="Type a tag and press Space"
              />
            </div>
            <input id="prompt-tags" type="hidden" />
          </label>

          <div id="pn-tag-suggestions" class="pn-tag-suggestions"></div>
          <div id="pn-duplicate-warning" class="pn-duplicate-warning pn-hidden"></div>
        </div>

        <div class="pn-add-modal__section pn-add-modal__section--ai">
          <div class="pn-add-ai-actions">
            <select id="pn-improve-style" class="pn-sv-select pn-add-improve-style">
              <option value="general">General Polish</option>
              <option value="coding">Coding / Tech</option>
              <option value="study">Study / Summarize</option>
              <option value="creative">Creative Writing</option>
            </select>
            <button id="pn-improve-prompt-btn" class="pn-btn pn-btn--ghost pn-add-improve-btn" type="button">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v19"></path><path d="M5 10l7-7 7 7"></path></svg>
              Improve Text
            </button>
          </div>
        </div>

        <div class="pn-modal__actions pn-add-modal__actions">
          <button id="cancel-modal" class="pn-btn pn-btn--ghost" type="button">
            Cancel
          </button>
          <button
            id="confirm-duplicate"
            class="pn-btn pn-btn-warn hidden"
            type="button"
          >
            Save Anyway
          </button>
          <button
            id="save-new-prompt"
            class="pn-btn pn-btn--primary"
            type="button"
          >
            Save
          </button>
        </div>
      </div>
    </div>

    <!-- Improve Prompt Diff Modal -->
    <div
      id="pn-improve-modal"
      class="pn-modal pn-hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="pn-improve-modal-title"
    >
      <div class="pn-modal__backdrop" data-close-improve></div>
      <div class="pn-modal__panel pn-improve-panel">
        <div class="pn-improve-header">
          <h2 id="pn-improve-modal-title" class="pn-modal__title">
            <svg class="pn-improve-title-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v19"></path><path d="M5 10l7-7 7 7"></path></svg>
            Improve Prompt
          </h2>
          <select id="pn-improve-modal-style" class="pn-improve-style-select">
            <option value="general">General Polish</option>
            <option value="coding">Coding / Tech</option>
            <option value="study">Study / Summarize</option>
            <option value="creative">Creative Writing</option>
          </select>
        </div>

        <div id="pn-improve-loading" class="pn-improve-loading">
          <div class="pn-skeleton-line pn-skeleton-line--wide"></div>
          <div class="pn-skeleton-line pn-skeleton-line--medium"></div>
          <div class="pn-skeleton-line pn-skeleton-line--wide"></div>
          <div class="pn-skeleton-line pn-skeleton-line--short"></div>
          <p class="pn-improve-loading-text">Improving with AI‚Ä¶</p>
        </div>

        <div id="pn-improve-diff" class="pn-improve-diff pn-hidden">
          <div class="pn-improve-col">
            <div class="pn-improve-col-header">
              <span class="pn-improve-col-label">Original</span>
              <span id="pn-improve-orig-count" class="pn-improve-count"></span>
            </div>
            <div id="pn-improve-original" class="pn-improve-text"></div>
          </div>
          <div class="pn-improve-col pn-improve-col--new">
            <div class="pn-improve-col-header">
              <span class="pn-improve-col-label pn-improve-col-label--new">Improved</span>
              <span id="pn-improve-new-count" class="pn-improve-count"></span>
            </div>
            <div id="pn-improve-improved" class="pn-improve-text"></div>
          </div>
        </div>

        <div id="pn-improve-error" class="pn-improve-error pn-hidden">
          <p id="pn-improve-error-msg">Could not improve prompt.</p>
        </div>

        <div class="pn-improve-actions">
          <button id="pn-improve-reject" class="pn-btn pn-btn-danger" type="button">Discard</button>
          <button id="pn-improve-retry" class="pn-btn pn-btn--ghost" type="button">Retry</button>
          <button id="pn-improve-save-only" class="pn-btn pn-btn--ghost pn-hidden" type="button">Save to Library</button>
          <button id="pn-improve-accept-secondary" class="pn-btn pn-btn--ghost pn-hidden" type="button">Inject + Save</button>
          <button id="pn-improve-accept" class="pn-btn pn-btn--primary" type="button">Use Improved Text</button>
        </div>
      </div>
    </div>

    <script src="../libs/jspdf.min.js"></script>
    <script src="../libs/turndown.js"></script>
    <script src="../libs/markdown-it.min.js"></script>
    <script src="../utils/constants.js"></script>
    <script src="../utils/dom-helpers.js"></script>
    <script src="../utils/tags.js"></script>
    <script src="../utils/storage.js"></script>
    <script src="../utils/exporter.js"></script>
    <script src="../utils/templates.js"></script>
    <script src="../utils/ai.js"></script>
    <script src="../utils/ai-bridge.js"></script>
    <script src="sidepanel.js"></script>
  </body>
</html>
